#!./.venv/bin/python

"""
Author            : Nohavye
Author's Email    : noha.poncelet@gmail.com
Repository        : https://github.com/vixen-shell/vixen-shell.git
Description       : Vixen manager executable.
License           : GPL3
"""

import os, argparse

os.environ["GDK_BACKEND"] = "wayland"
from vx_library import Manager


def handle_args(args):
    manager = Manager.init()

    if args.setup:
        if args.setup == "remove":
            manager.remove()

    elif args.shell:
        if args.shell == "open":
            manager.shell_open()
        if args.shell == "close":
            manager.shell_close()

    elif args.dev:
        if args.dev == "run":
            manager.dev_run(os.getcwd())
        if args.dev == "new":
            manager.create_feature(os.getcwd())


if __name__ == "__main__":
    parser = argparse.ArgumentParser(
        description=f"""
        Vixen Manager.
    """
    )

    root_args = parser.add_mutually_exclusive_group(required=True)

    root_args.add_argument(
        "--setup", type=str, choices=["update", "remove"], help="Vixen Shell setup."
    )
    root_args.add_argument(
        "--shell", type=str, choices=["open", "close"], help="Vixen Shell controls."
    )
    root_args.add_argument(
        "--dev", type=str, choices=["run", "new"], help="Vixen Shell devs controls."
    )

    handle_args(parser.parse_args())
